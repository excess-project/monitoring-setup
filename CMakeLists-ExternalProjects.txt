include(ExternalProject)

if (COMMAND node)
    MESSAGE( STATUS "node: " )
endif()

ExternalProject_Add(
    elasticsearch

    PREFIX elasticsearch
    URL https://download.elasticsearch.org/elasticsearch/release/org/elasticsearch/distribution/tar/elasticsearch/2.1.1/elasticsearch-2.1.1.tar.gz

    CONFIGURE_COMMAND ""
    UPDATE_COMMAND ""
    BUILD_COMMAND ""
    INSTALL_COMMAND cd ../elasticsearch/bin && ./elasticsearch &

    TEST_COMMAND curl localhost:9200
)

ExternalProject_Add(
    monitoring-server

    PREFIX monitoring-server
    GIT_REPOSITORY https://github.com/excess-project/monitoring-server
    GIT_TAG ""

    CONFIGURE_COMMAND ""
    UPDATE_COMMAND ""
    BUILD_COMMAND ""
    INSTALL_COMMAND cd ../monitoring-server && npm install
)